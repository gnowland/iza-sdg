@import 'normalize';
@import 'animation';
@import 'divi';
@import 'override';

// @media only screen and (min-width: 500px) and (min-height: 360px) {
//     #iza-sdg-app {
//         // width: 100%;
//         // height: 100vh;
//         // background: pink;
//     }
// }
div#iza-sdg-app {
    display: flex;
    // flex-wrap: wrap;
    // justify-content: space-around;
    align-items: center;
    padding: 20px;
    margin: 0;
    text-align: center;
    overflow: hidden;
    background: #f22b3d;

    //test
    //max-height: calc(90vh - 40px);
    
    // > div {
    //     margin: 0 auto;
    //     vertical-align: middle;
    //     //display: inline-block;

    // }
}

// .svg-wrapper {
//     flex-grow: 1;
//     // flex: 1 0 60%;
//     //flex-basis: 60%;
//     //width: 60%;
// }

// .svg-arc {
//     position: relative;
//     max-height: calc(100vh - 40px);
//     overflow: hidden;

//     &:before {
//         content: '';
//         display: block;
//         padding-bottom: 100%;
//     }
// }

svg#iza-sdg {
    //flex: 1 1 200%;
    flex: 0 1 auto;
    //display: inline-block;
    position: relative;
    // width: 60%;
    align-self: flex-start;
    width: 100%;
    height: 100%;
    max-width: calc(100vw - 40px);
    //max-height: calc(100vh - 40px);
    max-height: 100vh;
    margin: 0;
    opacity: 0;
    transition: opacity 800ms ease-in-out;

    &.loaded {
        opacity: 1;

        + div#sdg-info {
            opacity: 1;
            padding: 2em;
        }
    }
}

g#sdgs {
    .loaded & {
        transition: transform 800ms ease-in-out 200ms;
    }

    &.pos {
        &.at-1  { transform: rotate(-1deg * (1 - 1) * 360 / 17 - 30 + 360); }  //330.0000deg
        &.at-2  { transform: rotate(-1deg * (2 - 1) * 360 / 17 - 30 + 360); }  //308.8235deg
        &.at-3  { transform: rotate(-1deg * (3 - 1) * 360 / 17 - 30 + 360); }  //287.6471deg
        &.at-4  { transform: rotate(-1deg * (4 - 1) * 360 / 17 - 30 + 360); }  //266.4706deg
        &.at-5  { transform: rotate(-1deg * (5 - 1) * 360 / 17 - 30 + 360); }  //245.294deg
        &.at-6  { transform: rotate(-1deg * (6 - 1) * 360 / 17 - 30 + 360); }  //224.118deg
        &.at-7  { transform: rotate(-1deg * (7 - 1) * 360 / 17 - 30 + 360); }  //202.941deg
        &.at-8  { transform: rotate(-1deg * (8 - 1) * 360 / 17 - 30 + 360); }  //181.765deg
        &.at-9  { transform: rotate(-1deg * (9 - 1) * 360 / 17 - 30 + 360); }  //160.588deg
        &.at-10 { transform: rotate(-1deg * (10 - 1) * 360 / 17 - 30 + 360); } //139.412deg
        &.at-11 { transform: rotate(-1deg * (11 - 1) * 360 / 17 - 30 + 360); } //118.235deg
        &.at-12 { transform: rotate(-1deg * (12 - 1) * 360 / 17 - 30 + 360); } //97.059deg
        &.at-13 { transform: rotate(-1deg * (13 - 1) * 360 / 17 - 30 + 360); } //75.882deg
        &.at-14 { transform: rotate(-1deg * (14 - 1) * 360 / 17 - 30 + 360); } //54.706deg
        &.at-15 { transform: rotate(-1deg * (15 - 1) * 360 / 17 - 30 + 360); } //33.529deg
        &.at-16 { transform: rotate(-1deg * (16 - 1) * 360 / 17 - 30 + 360); } //12.353deg
        &.at-17 { transform: rotate(-1deg * (17 - 1) * 360 / 17 - 30 + 360); } //-8.824deg
    }

    &.neg {
        &.at-1  { transform: rotate(-1deg * (1 - 1) * 360 / 17 - 30); }  //-30.0000deg
        &.at-2  { transform: rotate(-1deg * (2 - 1) * 360 / 17 - 30); }  //-51.1765deg
        &.at-3  { transform: rotate(-1deg * (3 - 1) * 360 / 17 - 30); }  //-72.3529deg
        &.at-4  { transform: rotate(-1deg * (4 - 1) * 360 / 17 - 30); }  //-93.5294deg
        &.at-5  { transform: rotate(-1deg * (5 - 1) * 360 / 17 - 30); }  //-114.706deg
        &.at-6  { transform: rotate(-1deg * (6 - 1) * 360 / 17 - 30); }  //-135.882deg
        &.at-7  { transform: rotate(-1deg * (7 - 1) * 360 / 17 - 30); }  //-157.059deg
        &.at-8  { transform: rotate(-1deg * (8 - 1) * 360 / 17 - 30); }  //-178.235deg
        &.at-9  { transform: rotate(-1deg * (9 - 1) * 360 / 17 - 30); }  //-199.412deg
        &.at-10 { transform: rotate(-1deg * (10 - 1) * 360 / 17 - 30); } //-220.588deg
        &.at-11 { transform: rotate(-1deg * (11 - 1) * 360 / 17 - 30); } //-241.765deg
        &.at-12 { transform: rotate(-1deg * (12 - 1) * 360 / 17 - 30); } //-262.941deg
        &.at-13 { transform: rotate(-1deg * (13 - 1) * 360 / 17 - 30); } //-284.118deg
        &.at-14 { transform: rotate(-1deg * (14 - 1) * 360 / 17 - 30); } //-305.294deg
        &.at-15 { transform: rotate(-1deg * (15 - 1) * 360 / 17 - 30); } //-326.471deg
        &.at-16 { transform: rotate(-1deg * (16 - 1) * 360 / 17 - 30); } //-347.647deg
        &.at-17 { transform: rotate(-1deg * (17 - 1) * 360 / 17 - 30); } //-368.824deg
    }


    > g { // individual slices
        opacity: 0;
        cursor: pointer;
        outline: none;
        transform: scale(1);
        transition: transform 200ms ease-in-out;

        &:focus,
        &:hover {
            transform: scale(1.025);
        }

        &.active {
            transform: scale(1.075);
        }

        .loaded & {
            animation: fadein 200ms ease-in-out;
            animation-fill-mode: forwards;
            &:nth-of-type(1)  {animation-delay: 50ms; }
            &:nth-of-type(2)  {animation-delay: 100ms;}
            &:nth-of-type(3)  {animation-delay: 150ms;}
            &:nth-of-type(4)  {animation-delay: 200ms;}
            &:nth-of-type(5)  {animation-delay: 250ms;}
            &:nth-of-type(6)  {animation-delay: 300ms;}
            &:nth-of-type(7)  {animation-delay: 350ms;}
            &:nth-of-type(8)  {animation-delay: 400ms;}
            &:nth-of-type(9)  {animation-delay: 450ms;}
            &:nth-of-type(10) {animation-delay: 500ms;}
            &:nth-of-type(11) {animation-delay: 550ms;}
            &:nth-of-type(12) {animation-delay: 600ms;}
            &:nth-of-type(13) {animation-delay: 650ms;}
            &:nth-of-type(14) {animation-delay: 700ms;}
            &:nth-of-type(15) {animation-delay: 750ms;}
            &:nth-of-type(16) {animation-delay: 800ms;}
            &:nth-of-type(17) {animation-delay: 850ms;}
        }
    }
}

div#sdg-info {
    //flex: 1 1 40%;
    flex: 1 0 50%;
    //flex-basis: 35%;
    //flex-basis: 40%;
    //display: inline-block;
    //width: calc(40% - 6px);
    // flex-grow: 1;
    padding: 0;
    text-align: left;
    background-color: #FFF;
    position: relative;
    box-shadow: 0 0 0 0 transparent;
    transition: all 800ms ease-in-out;
    &:before {
        content: "";
        display: block;
        position: absolute;
        width: 84px;
        left: 50%;
        transform: translateX(-50%);
        top: -21px;
        background: #FFF;
        height: 21px;
        box-shadow: 0 -5px 10px -6px rgba(0, 0, 0, 0.35);
        z-index: 0;
        opacity: 0;
        transition: opacity 800ms ease-in-out 400ms;
    }
    &.pop {
        //box-shadow: 0 1px 6px 0px rgba(0, 0, 0, 0.3);
        box-shadow: 0 1px 12px -3px rgba(0, 0, 0, 0.55);
        transition: box-shadow 600ms ease-in 400ms;
    }

    > div {
        font-size: 0.88em;
        //font-size: 1.33vw;
        height: auto;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        transition: max-height 600ms ease-in-out, opacity 300ms ease-in-out;

        &:first-of-type {
            font-size: 1em;
            text-align: center;
        }

        &.visible {
            max-height: 100vh;
            opacity: 1;
            overflow: visible;
            transition: max-height 600ms ease-in-out 600ms, opacity 300ms ease-in-out 800ms;
            //transition: all 600ms ease-in-out 600ms;
        }
    }

// .content-wrapper {
//     padding: 20px 30px;
//     border-radius: 4px;
//     border: 3px solid #D3D3D3;
//     box-shadow: 0 0 10px -5px #777;

//     h2, .button {
//         text-align: center;
//     }
// }

    aside {
            display: block;
            position: absolute;
            top: -0.5em;
            left: 50%;
            transform: translateX(-50%);
            color: #333;
            font-size: 1.7em;
            padding: 0 0.5em;
            line-height: 1;
    }

    h2 {
        padding-bottom: 0.6em;
        font-size: 1.6em;
    }

    h3 {
        line-height: 1.5em;
        padding-bottom: 0.3em;
        position: relative;
    }

    ul, ol {
        line-height: 1.3;
        padding: 0 0 0.6em 1.6em;
    }

    ul:not(:last-of-type) li {
        position: relative;
        &:last-of-type{
            padding-bottom: 0.9em;
            &:after {
                content: "";
                display: block;
                position: absolute;
                left: calc(50% - 5px);
                width: 10px;
                bottom: -1px;
                border-top: 2px dotted #E6E6E6;
            }
        }
    }

    p, p:last-of-type, li {
        padding-bottom: 0.3em;
    }

    .button {
        margin-top: 0.3em;
    }
}

// Test:
.next-section {
    height: 10vh;
    background: gray;
}
